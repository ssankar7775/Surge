<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Mission Budget Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Space Mission Budget Calculator</h1>
        <nav>
            <button id="power-budget-btn">Power Budget</button>
            <button id="link-budget-btn">Link Budget</button>
        </nav>
    </header>
    <main>
        <section id="power-budget-section" class="budget-section">
            <h2>Power Budget</h2>
            <section id="drafts-section">
                <h3>Drafts & Models</h3>
                <div class="form-group">
                    <label for="model-name">Model Name:</label>
                    <input type="text" id="model-name" placeholder="Enter model name">
                </div>
                <div class="form-group">
                    <label for="model-desc">Description (optional):</label>
                    <textarea id="model-desc" placeholder="Enter description"></textarea>
                </div>
                <button id="save-new-model">Save as New Model</button>
                <button id="update-model">Update Current Model</button>
                <div class="form-group">
                    <label for="load-model">Load Model:</label>
                    <select id="load-model">
                        <option value="">Select a model</option>
                    </select>
                    <button id="load-selected-model">Load</button>
                </div>
                <div id="current-model-info"></div>
                <button id="clear-all-data" style="background-color: #f44336; color: white; margin-top: 1rem;">Clear All Data</button>
                <p style="color: #666; font-size: 0.9em; margin-top: 0.5rem;">Warning: This will delete all saved models, components, and modes permanently.</p>
            </section>
            <div class="tabs">
                <button class="tab-button active" data-tab="model">Current Model</button>
                <button class="tab-button" data-tab="library">Component Library</button>
                <button class="tab-button" data-tab="modes">Modes</button>
            </div>
            <div class="tab-content hidden" id="library-tab">
                <h3>Component Library</h3>
                <form id="library-form">
                    <div class="form-group">
                        <label for="lib-name">Component Name/Description:</label>
                        <input type="text" id="lib-name" required>
                    </div>
                    <div class="form-group">
                        <label for="lib-model">Component Model Number:</label>
                        <input type="text" id="lib-model">
                    </div>
                    <div class="form-group">
                        <label for="lib-voltage">Voltage (V):</label>
                        <input type="number" id="lib-voltage" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="lib-current">Current (A):</label>
                        <input type="number" id="lib-current" step="0.01" required>
                    </div>
                    <button type="submit">Add to Library</button>
                </form>
                <h4>Library Components</h4>
                <ul id="library-list"></ul>
                <h4>Add to Current Model</h4>
                <p>Select components from the library to add to your current model:</p>
                <div id="library-add-to-model"></div>
                <h4>Copy from Current Model</h4>
                <p>Copy components from your current model to the library (this doesn't remove them from your model):</p>
                <div id="model-to-library"></div>
            </div>
            <div class="tab-content" id="model-tab">
                <h3>Current Model Components</h3>
                <form id="model-form">
                    <div class="form-group">
                        <label for="component-name">Component Name/Description:</label>
                        <input type="text" id="component-name" required>
                    </div>
                    <div class="form-group">
                        <label for="model-model">Component Model Number:</label>
                        <input type="text" id="model-model">
                    </div>
                    <div class="form-group">
                        <label for="model-voltage">Voltage (V):</label>
                        <input type="number" id="model-voltage" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="model-current">Current (A):</label>
                        <input type="number" id="model-current" step="0.01" required>
                    </div>
                    <button type="submit">Add to Current Model</button>
                </form>
                <ul id="model-list"></ul>
                <section id="battery-section">
                    <h3>Battery Analysis</h3>
                    <div class="form-group">
                        <label for="dod">Depth of Discharge (%):</label>
                        <input type="number" id="dod" step="1" value="80">
                    </div>
                    <div class="form-group">
                        <label for="efficiency">Efficiency (%):</label>
                        <input type="number" id="efficiency" step="1" value="90">
                    </div>
                    <div class="form-group">
                        <label for="bus-voltage">Bus Voltage (V):</label>
                        <input type="number" id="bus-voltage" step="0.01" value="28">
                    </div>
                    <button id="calculate-battery">Calculate Battery Capacity</button>
                    <div id="battery-results"></div>
                </section>
                <table id="power-budget-table">
                    <thead id="table-head">
                        <tr>
                            <th>Component</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <div id="mode-totals"></div>
                <div id="total-power">Total Power (All Modes): 0 W</div>
            </div>
            <div class="tab-content hidden" id="modes-tab">
                <h3>Define Modes</h3>
                <div class="form-group">
                    <label for="mode-name-input">Mode Name:</label>
                    <input type="text" id="mode-name-input">
                    <label for="mode-duration">Duration (hours):</label>
                    <input type="number" id="mode-duration" step="0.01">
                    <label for="copy-from">Copy from:</label>
                    <select id="copy-from">
                        <option value="">None</option>
                    </select>
                    <button id="add-mode-global">Add Mode</button>
                </div>
                <ul id="modes-list"></ul>
            </div>
        </section>
        <section id="link-budget-section" class="budget-section hidden">
            <h2>Link Budget</h2>
            <form id="link-budget-form">
                <div class="form-group">
                    <label for="frequency">Frequency (GHz):</label>
                    <input type="number" id="frequency" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="transmit-power">Transmit Power (dBW):</label>
                    <input type="number" id="transmit-power" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="transmit-gain">Transmit Antenna Gain (dBi):</label>
                    <input type="number" id="transmit-gain" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="distance">Distance (km):</label>
                    <input type="number" id="distance" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="receive-gain">Receive Antenna Gain (dBi):</label>
                    <input type="number" id="receive-gain" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="noise-temp">System Noise Temperature (K):</label>
                    <input type="number" id="noise-temp" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="bandwidth">Bandwidth (Hz):</label>
                    <input type="number" id="bandwidth" step="0.01" required>
                </div>
                <button type="submit">Calculate Link Budget</button>
            </form>
            <div id="link-budget-results" class="hidden">
                <h3>Results</h3>
                <p id="eirp">EIRP: </p>
                <p id="path-loss">Free Space Path Loss: </p>
                <p id="received-power">Received Power: </p>
                <p id="noise-power">Noise Power: </p>
                <p id="snr">SNR: </p>
                <p id="link-margin">Link Margin: </p>
            </div>
        </section>
    </main>
    <script src="script.js"></script>
</body>
</html>